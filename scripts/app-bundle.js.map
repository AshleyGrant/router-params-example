{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/search.js","src/resources/index.js","C:/Users/Ashley/temp/router-params/src/app.html","C:/Users/Ashley/temp/router-params/src/styles.css","C:/Users/Ashley/temp/router-params/src/nav-bar.html","C:/Users/Ashley/temp/router-params/src/search.html"],"names":["App","configureRouter","config","router","title","map","route","redirect","name","moduleId","nav","href","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Search","changeHandler","bindingEngine","initialized","schools","district","districts","find","d","id","s","level","levels","l","JSON","parse","stringify","selectedDistricts","selectedLevels","searchResults","activate","params","routeConfig","navigationInstruction","searchTerm","push","split","Number","x","criteriaUpdated","collectionObserver","subscribe","navigateToRoute","length","join","replace","trigger","query","toLocaleLowerCase","filter","includes"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  configureRouter(config, router) {\n    config.title = 'Aurelia';\n    config.map([\n      { route: '', redirect: 'search' },\n      {\n        route: 'search/:selectedDistricts?/:selectedLevels?/:searchTerm?',\n        name: 'search',\n        moduleId: 'search',\n        nav: true,\n        title: 'Search',\n        href: '#/search'\n      }\n    ]);\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { inject, observable, BindingEngine } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\n\n@inject(Router, BindingEngine)\nexport class Search {\n  initialized = false;\n  schools = schools.map(s => {\n    const district = districts.find(d => d.id === s.district);\n    const level = levels.find(l => l.id === s.level);\n    return {\n      id: s.id,\n      name: s.name,\n      district: district,\n      level: level\n    };\n  })\n  districts = JSON.parse(JSON.stringify(districts));\n  levels = JSON.parse(JSON.stringify(levels));\n  selectedDistricts = [];\n  selectedLevels = [];\n  searchResults = [];\n  \n  @observable({\n    changeHandler: 'criteriaUpdated'\n  }) searchTerm = '';\n\n  constructor(router, bindingEngine) {\n    this.router = router;\n    this.bindingEngine = bindingEngine;\n  }\n\n  activate(params, routeConfig, navigationInstruction) {\n    if (params.searchTerm && params.searchTerm !== 'null') {\n      this.searchTerm = params.searchTerm;\n    }\n\n    if (params.selectedDistricts && params.selectedDistricts !== 'null') {\n      // this goofiness is because all router parameters are given as strings,\n      // so we split the string on commas, then convert each item in this array\n      // to a Number. Finally, we use the spread operator to convert this array\n      // into a bunch of parameters passed to push\n      this.selectedDistricts.push(...params.selectedDistricts.split(',').map(x => Number(x)));\n    }\n\n    if (params.selectedLevels && params.selectedLevels !== 'null') {\n      // this goofiness is because all router parameters are given as strings,\n      // so we split the string on commas, then convert each item in this array\n      // to a Number. Finally, we use the spread operator to convert this array\n      // into a bunch of parameters passed to push\n      this.selectedLevels.push(...params.selectedLevels.split(',').map(x => Number(x)));\n    }\n\n    this.criteriaUpdated();\n\n    this.bindingEngine.collectionObserver(this.selectedDistricts).subscribe(() => this.criteriaUpdated());\n    this.bindingEngine.collectionObserver(this.selectedLevels).subscribe(() => this.criteriaUpdated());\n    this.initialized = true;\n  }\n\n  criteriaUpdated() {\n    if (this.initialized) {\n      this.router.navigateToRoute('search', {\n        searchTerm: this.searchTerm || 'null',\n        selectedDistricts: this.selectedDistricts.length > 0 ? this.selectedDistricts.join(',') : 'null',\n        selectedLevels: this.selectedLevels.length > 0 ? this.selectedLevels.join(',') : 'null'\n      }, {\n          replace: false,\n          trigger: false\n        });\n    }\n    this.searchResults = this.schools;\n\n    if (!(this.searchTerm.length === 0 && this.selectedDistricts.length === 0 && this.selectedLevels.length === 0)) {\n      if (this.searchTerm.length > 0) {\n        const query = this.searchTerm.toLocaleLowerCase();\n        this.searchResults = this.searchResults.filter(s => s.name.toLocaleLowerCase().includes(query));\n      }\n\n      if (this.selectedDistricts.length > 0) {\n        this.searchResults = this.searchResults.filter(s => this.selectedDistricts.includes(s.district.id));\n      }\n\n      if (this.selectedLevels.length > 0) {\n        this.searchResults = this.searchResults.filter(s => this.selectedLevels.includes(s.level.id));\n      }\n    }\n  }\n}\n\nconst schools = [{\n  id: 1,\n  name: 'Leon',\n  district: 1,\n  level: 3\n}, {\n  id: 2,\n  name: 'Raa',\n  district: 1,\n  level: 2\n}, {\n  id: 3,\n  name: 'Chiles',\n  district: 2,\n  level: 3\n}, {\n  id: 4,\n  name: 'Gilchrist',\n  district: 1,\n  level: 1\n}];\n\nconst districts = [{\n  id: 1,\n  name: 'District One'\n}, {\n  id: 2,\n  name: 'District Two'\n}\n];\n\nconst levels = [{\n  id: 1,\n  name: 'Elementary'\n}, {\n  id: 2,\n  name: 'Middle'\n}, {\n  id: 3,\n  name: 'High'\n}];\n","export function configure(config) {\n  //config.globalResources([]);\n}\n",null,null,null,null],"sourceRoot":"..\\src"}